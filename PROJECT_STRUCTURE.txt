LAPTOP CHECK-OUT SYSTEM - PROJECT STRUCTURE
===========================================

laptop-checkout-system/
â”‚
â”œâ”€â”€ ğŸ“„ README.md                          # Main project documentation
â”œâ”€â”€ ğŸ“„ IMPLEMENTATION_SUMMARY.md          # Detailed implementation summary
â”œâ”€â”€ ğŸ“„ QUICK_REFERENCE.md                 # Quick command reference
â”œâ”€â”€ ğŸ“„ PHASE_1_2_COMPLETE.md             # Phase completion summary
â”œâ”€â”€ ğŸ“„ PROJECT_STRUCTURE.txt             # This file
â”‚
â”œâ”€â”€ ğŸ³ docker-compose.yml                 # Docker Compose configuration
â”‚   â”œâ”€â”€ PostgreSQL 16 container
â”‚   â”œâ”€â”€ Redis 7 container
â”‚   â””â”€â”€ Backend NestJS container
â”‚
â”œâ”€â”€ ğŸ“ backend/                           # NestJS Backend Application
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ src/                           # Source code
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ auth/                      # Authentication Module
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ dto/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ login.dto.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ refresh-token.dto.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ strategies/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ jwt.strategy.ts      # JWT Passport Strategy
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.controller.ts       # Auth endpoints
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.service.ts          # Auth business logic
â”‚   â”‚   â”‚   â””â”€â”€ auth.module.ts           # Auth module config
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ users/                     # User Management Module
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ dto/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ create-user.dto.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ update-user.dto.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ users.controller.ts      # User endpoints
â”‚   â”‚   â”‚   â”œâ”€â”€ users.service.ts         # User business logic
â”‚   â”‚   â”‚   â””â”€â”€ users.module.ts          # User module config
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ laptops/                   # Laptop Management Module
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ dto/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ create-laptop.dto.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ update-laptop.dto.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ laptops.controller.ts    # Laptop endpoints
â”‚   â”‚   â”‚   â”œâ”€â”€ laptops.service.ts       # Laptop business logic + QR
â”‚   â”‚   â”‚   â””â”€â”€ laptops.module.ts        # Laptop module config
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ common/                    # Shared Utilities
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ decorators/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ current-user.decorator.ts  # @CurrentUser
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ roles.decorator.ts         # @Roles
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ filters/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ http-exception.filter.ts   # Global error handler
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ guards/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ jwt-auth.guard.ts          # JWT authentication
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ roles.guard.ts             # Role-based access
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ enums/
â”‚   â”‚   â”‚       â””â”€â”€ error-codes.enum.ts        # Error code taxonomy
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ config/                    # Configuration Services
â”‚   â”‚   â”‚   â””â”€â”€ prisma.service.ts        # Prisma client service
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ app.module.ts                # Root application module
â”‚   â”‚   â””â”€â”€ main.ts                      # Application bootstrap
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ prisma/                        # Database
â”‚   â”‚   â”œâ”€â”€ schema.prisma                # Database schema (6 tables)
â”‚   â”‚   â”‚   â”œâ”€â”€ users (soft delete)
â”‚   â”‚   â”‚   â”œâ”€â”€ laptops (soft delete)
â”‚   â”‚   â”‚   â”œâ”€â”€ checkouts
â”‚   â”‚   â”‚   â”œâ”€â”€ lost_found_events
â”‚   â”‚   â”‚   â”œâ”€â”€ audit_logs
â”‚   â”‚   â”‚   â””â”€â”€ notification_logs
â”‚   â”‚   â””â”€â”€ seed.ts                      # Seed data script
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“„ .env                          # Environment variables (active)
â”‚   â”œâ”€â”€ ğŸ“„ .env.example                  # Environment template
â”‚   â”œâ”€â”€ ğŸ“„ .gitignore                    # Git ignore rules
â”‚   â”œâ”€â”€ ğŸ“„ .dockerignore                 # Docker ignore rules
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ³ Dockerfile                     # Backend Docker image
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“„ package.json                  # Dependencies & scripts
â”‚   â”œâ”€â”€ ğŸ“„ tsconfig.json                 # TypeScript configuration
â”‚   â”œâ”€â”€ ğŸ“„ nest-cli.json                 # NestJS CLI configuration
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“„ SETUP.md                      # Detailed setup guide
â”‚
â””â”€â”€ ğŸ“ frontend/                          # React Frontend (Future)
    â””â”€â”€ (To be implemented in later phases)


DATABASE SCHEMA (PostgreSQL)
=============================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     users       â”‚       â”‚     laptops      â”‚       â”‚   checkouts     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚â—„â”€â”€â”   â”‚ id (PK)          â”‚â—„â”€â”€â”   â”‚ id (PK)         â”‚
â”‚ email (unique)  â”‚   â”‚   â”‚ unique_id        â”‚   â”‚   â”‚ laptop_id (FK)  â”‚
â”‚ password_hash   â”‚   â”‚   â”‚ serial_number    â”‚   â”‚   â”‚ user_id (FK)    â”‚
â”‚ name            â”‚   â”‚   â”‚ make             â”‚   â”‚   â”‚ checked_out_at  â”‚
â”‚ role            â”‚   â”‚   â”‚ model            â”‚   â”‚   â”‚ checked_in_at   â”‚
â”‚ group_name      â”‚   â”‚   â”‚ status           â”‚   â”‚   â”‚ status          â”‚
â”‚ team            â”‚   â”‚   â”‚ qr_code_url      â”‚   â”‚   â”‚ created_at      â”‚
â”‚ created_at      â”‚   â”‚   â”‚ created_at       â”‚   â”‚   â”‚ updated_at      â”‚
â”‚ updated_at      â”‚   â”‚   â”‚ updated_at       â”‚   â”‚   â”‚                 â”‚
â”‚ deleted_at *    â”‚   â”‚   â”‚ deleted_at *     â”‚   â”‚   â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚                          â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
        â”‚                             â”‚          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ lost_found_events   â”‚     â”‚   notification_logs     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)             â”‚     â”‚ id (PK)                 â”‚
â”‚ laptop_id (FK)      â”‚     â”‚ notification_type       â”‚
â”‚ checkout_id (FK)    â”‚     â”‚ recipient_email         â”‚
â”‚ original_user_id    â”‚     â”‚ recipient_user_id (FK)  â”‚
â”‚ finder_user_id      â”‚     â”‚ status                  â”‚
â”‚ event_timestamp     â”‚     â”‚ sent_at                 â”‚
â”‚ duration_minutes    â”‚     â”‚ retry_count             â”‚
â”‚ created_at          â”‚     â”‚ created_at              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ updated_at              â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ audit_logs  â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ id (PK)     â”‚
        â”‚ user_id (FK)â”‚
        â”‚ action      â”‚
        â”‚ entity_type â”‚
        â”‚ entity_id   â”‚
        â”‚ details     â”‚
        â”‚ ip_address  â”‚
        â”‚ created_at  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

* = Soft delete enabled


API ENDPOINTS (Version 1)
==========================

Authentication (Public)
-----------------------
POST   /api/v1/auth/login           # Login with email/password
POST   /api/v1/auth/logout          # Logout
POST   /api/v1/auth/refresh-token   # Refresh access token
GET    /api/v1/auth/me              # Get current user

Users (Protected)
-----------------
GET    /api/v1/users                # List all users (Admin)
GET    /api/v1/users/:id            # Get user by ID (Admin)
POST   /api/v1/users                # Create user (Admin)
PATCH  /api/v1/users/:id            # Update user (Admin)
DELETE /api/v1/users/:id            # Delete user (Admin)
GET    /api/v1/users/me             # Get own profile
PATCH  /api/v1/users/me             # Update own profile

Laptops (Protected)
-------------------
GET    /api/v1/laptops              # List all laptops
GET    /api/v1/laptops/:id          # Get laptop by ID
GET    /api/v1/laptops/unique/:uid  # Get by unique ID (QR scan)
POST   /api/v1/laptops              # Create laptop (Admin)
PATCH  /api/v1/laptops/:id          # Update laptop (Admin)
DELETE /api/v1/laptops/:id          # Delete laptop (Admin)
GET    /api/v1/laptops/:id/history  # Checkout history (Admin)
GET    /api/v1/laptops/:id/qr-code  # Generate QR code (Admin)


TECHNOLOGY STACK
================

Backend Framework
-----------------
â€¢ NestJS 11.1.9         - Enterprise Node.js framework
â€¢ TypeScript 5.9.3      - Strict mode enabled
â€¢ Node.js 18+           - JavaScript runtime

Database & ORM
--------------
â€¢ PostgreSQL 16         - Relational database
â€¢ Prisma 6.19.0        - Type-safe ORM
â€¢ Redis 7              - Cache & queue

Authentication
--------------
â€¢ Passport.js 0.7.0    - Auth middleware
â€¢ JWT 11.0.1           - Token authentication
â€¢ bcryptjs 3.0.3       - Password hashing

Queue System
------------
â€¢ Bull 4.16.5          - Redis-based queue
â€¢ @nestjs/bull 11.0.4  - NestJS integration
â€¢ Bull Board 6.14.2    - Queue monitoring

Security
--------
â€¢ Helmet 8.1.0         - Security headers
â€¢ Throttler 6.4.0      - Rate limiting
â€¢ class-validator 0.14.2 - Input validation

Utilities
---------
â€¢ qrcode 1.5.4         - QR code generation
â€¢ class-transformer 0.5.1 - DTO transformation

Development
-----------
â€¢ Docker Compose       - Container orchestration
â€¢ pnpm                - Package manager
â€¢ Prisma Studio       - Database GUI


DEVELOPMENT COMMANDS
====================

# Start databases
docker compose up -d postgres redis

# Install dependencies
cd backend && pnpm install

# Database setup
pnpm prisma generate                   # Generate Prisma Client
pnpm prisma migrate dev --name init    # Run migrations
pnpm prisma:seed                       # Seed database

# Development
pnpm run start:dev                     # Start dev server
pnpm run build                         # Build for production
pnpm run start:prod                    # Run production

# Database management
pnpm prisma studio                     # Open database GUI
pnpm prisma migrate dev --name xyz     # Create migration
pnpm prisma migrate reset              # Reset database


SEED DATA
=========

Admin User:
  Email:    admin@example.com
  Password: Admin123!
  Role:     admin

User:
  Email:    user@example.com
  Password: User123!
  Role:     interviewer

Laptops:
  1. Dell Latitude 5420 (Available)
  2. HP EliteBook 840 G8 (Available)
  3. Lenovo ThinkPad X1 Carbon (Maintenance)


PHASE COMPLETION STATUS
========================

âœ… Phase 1: Foundation & Setup (COMPLETE)
  - Project structure
  - Database schema
  - Docker Compose
  - Redis & Bull
  - Authentication
  - API versioning
  - Error handling
  - Security

âœ… Phase 2: Core Laptop Management (COMPLETE)
  - Laptop CRUD
  - QR code generation
  - User CRUD
  - Soft delete

â³ Phase 3: Check-out/Check-in Flow (NEXT)
â³ Phase 4: Lost & Found
â³ Phase 5: Admin Dashboard & Overdue
â³ Phase 6: User Management Polish
â³ Phase 7: Testing
â³ Phase 8: Deployment


DOCUMENTATION FILES
===================

ğŸ“„ README.md                    - Main project documentation
ğŸ“„ SETUP.md                     - Detailed setup guide
ğŸ“„ QUICK_REFERENCE.md           - Quick commands & examples
ğŸ“„ IMPLEMENTATION_SUMMARY.md    - Comprehensive summary
ğŸ“„ PHASE_1_2_COMPLETE.md       - Phase completion report
ğŸ“„ PROJECT_STRUCTURE.txt        - This file


NEXT STEPS
==========

1. Start Docker services:
   docker compose up -d postgres redis

2. Setup backend:
   cd backend
   pnpm install
   pnpm prisma generate
   pnpm prisma migrate dev --name init
   pnpm prisma:seed

3. Start development server:
   pnpm run start:dev

4. Test API:
   curl -X POST http://localhost:3000/api/v1/auth/login \
     -H "Content-Type: application/json" \
     -d '{"email":"admin@example.com","password":"Admin123!"}'

5. Begin Phase 3 implementation


Created: November 16, 2025
Status: Phase 1 & 2 Complete âœ…
Next: Phase 3 - Check-out/Check-in Flow
